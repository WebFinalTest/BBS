<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="renderer" content="webkit">
    <title>查看我创建的帖子</title>

    <meta name="keywords" content="">
    <meta name="description" content="">

    <!-- [if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html"/>
    <! [endif]-->

    <link rel="shortcut icon" href="/img/favicon.ico">

    <link rel="stylesheet" href="/BBs/static/css/bootstrap.min.css?v=3.3.6">
    <link rel="stylesheet" href="/BBs/static/css/font-awesome.min.css?v=4.7.0">
    <link rel="stylesheet" href="/BBs/static/css/plugins/toastr/toastr.min.css">
    <link rel="stylesheet" href="/BBs/static/css/animate.css">
    <link rel="stylesheet" href="/BBs/static/css/style.css?v=4.1.0">
    <link rel="stylesheet" href="/BBs/static/css/custom/custom.css">

    <link rel="stylesheet" href="/css/bootstrap.min.css?v=3.3.6">
    <link rel="stylesheet" href="/css/font-awesome.min.css?v=4.7.0">
    <link rel="stylesheet" href="/css/plugins/toastr/toastr.min.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/style.css?v=4.1.0">
</head>
<body class="gray-bg">
<script>
    var page = 1;
</script>
<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-sm-12">
            <div class="wrapper wrapper-content animated fadeInRight">
                <div class="ibox-content m-b-sm border-bottom">
                    <div class="p-xs">
                        <h1 class="text-center">我创建的帖子</h1>
                    </div>
                </div>
                <div class="ibox-content forum-container">
                    <div class="forum-item" th:each="post,indexInc:${posts}">
                        <div class="row">
                            <div class="col-sm-9">
                                <div th:switch="${indexInc.index%13}" class="forum-icon">
                                    <i th:case="0" class="fa fa-hand-spock-o"></i>
                                    <i th:case="1" class="fa fa-hand-lizard-o"></i>
                                    <i th:case="2" class="fa fa-hand-o-down"></i>
                                    <i th:case="3" class="fa fa-hand-o-left"></i>
                                    <i th:case="4" class="fa fa-hand-o-right"></i>
                                    <i th:case="5" class="fa fa-hand-o-up"></i>
                                    <i th:case="6" class="fa fa-hand-paper-o"></i>
                                    <i th:case="7" class="fa fa-hand-peace-o"></i>
                                    <i th:case="8" class="fa fa-hand-pointer-o"></i>
                                    <i th:case="9" class="fa fa-hand-rock-o"></i>
                                    <i th:case="10" class="fa fa-hand-scissors-o"></i>
                                    <i th:case="*" class="fa fa-hand-stop-o"></i>
                                </div>
                                <a th:href="@{/Comment/goPostByPostId/{postId}(postId=${post.getPostId()})}"
                                   th:text="${post.getPostTitle()}"></a>
                                <a th:href="@{/Post/update/{postId}(postId=${post.getPostId()})}"
                                   class="btn btn-xs btn-info">修改
                                </a>
                                <button th:onclick="'javascript:deletePost('+${post.getPostId()}+')'"
                                        class="btn btn-xs btn-danger">删除
                                </button>
                                <div class="forum-sub-title" th:text="${post.getPostContent()}"></div>
                            </div>
                            <div class="col-sm-1 forum-info">
                                <span class="views-number" th:text="${post.getLikes()}"></span>
                                <div>
                                    <small>点赞</small>
                                </div>
                            </div>
                            <div class="col-sm-1 forum-info">
                                <span class="views-number" th:text="${post.getCollects()}"></span>
                                <div>
                                    <small>收藏</small>
                                </div>
                            </div>
                            <!--<div class="col-sm-1 forum-info">-->
                                <!--<span class="views-number" th:text="${countComments.get(post.getPostId())}"></span>-->
                                <!--<div>-->
                                    <!--<small>评论</small>-->
                                <!--</div>-->
                            <!--</div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- 全局js -->
<script src="/BBs/static/js/jquery.min.js?v=2.1.4"></script>
<script src="/BBs/static/js/bootstrap.min.js?v=3.3.6"></script>

<!-- 自定义js -->
<script src="/BBs/static/js/hAdmin.js?v=4.1.0"></script>
<script src="/BBs/static/js/index.js"></script>
<script src="/BBs/static/js/custom/commons.js"></script>
<script src="/BBs/static/js/custom/custom.js"></script>

<!-- 第三方插件 -->
<script src="/BBs/static/js/plugins/pace/pace.min.js"></script>
<script src="/BBs/static/js/plugins/toastr/toastr.min.js"></script>
<script src="/BBs/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="/BBs/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="/BBs/static/js/plugins/layer/layer.min.js"></script>

<!-- 全局js -->
<script src="/js/jquery.min.js?v=2.1.4"></script>
<script src="/js/bootstrap.min.js?v=3.3.6"></script>

<!-- 自定义js -->
<script src="/js/hAdmin.js?v=4.1.0"></script>
<script src="/js/index.js"></script>
<script src="/js/custom/commons.js"></script>
<script src="/js/custom/custom.js"></script>

<!-- 第三方插件 -->
<script src="/js/plugins/pace/pace.min.js"></script>
<script src="/js/plugins/toastr/toastr.min.js"></script>
<script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="/js/plugins/layer/layer.min.js"></script>
<script>
    function deletePost(postId) {
        $.ajax({
            url: "/Post/deleteByPostId",
            data: {
                "postId": postId
            },
            type: "POST",
            dataType: "json",
            timeout: 3000,
            async: true,
            success: function (result) {
                if (result.message === "success"){
                    toastr.success("删除成功", "删除成功");
                    window.location.reload();
                }
                else
                    toastr.error("删除失败", "删除失败");
            },
            error: function () {
                toastr.error("系统异常，请重试", "删除失败");
            }
        });
    }
</script>
</body>
< /html>
